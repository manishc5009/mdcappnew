import{r as l,u as se,j as e,L as ae,a as O,y as v,F as j,f as $e,b as Se,c as Ce,d as tt,e as Te,g as st,h as Oe,i as at,k as rt,l as Ae,m as Ue,v as pe,n as Z,o as H,p as ot,q as Pe,s as De,t as M,w as lt,C as ge,x as Le,z as nt,A as it,B as dt,N as ct,D as mt,E as xt,G as ut,H as ht,I as pt,J as ze,K as Re,M as gt,O as fe,P as Me,Q as bt,R as ft,S as I,T as yt}from"./vendor-DUDFtn3h.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const m of i)if(m.type==="childList")for(const c of m.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function s(i){const m={};return i.integrity&&(m.integrity=i.integrity),i.referrerPolicy&&(m.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?m.credentials="include":i.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function r(i){if(i.ep)return;i.ep=!0;const m=s(i);fetch(i.href,m)}})();const jt=""+new URL("v2-login-dark-B0PKZ4AA.png",import.meta.url).href,ye="mdc_auth_token",je="mdc_auth_user";function wt(t){localStorage.setItem(ye,t)}function _e(){return localStorage.getItem(ye)}function Nt(){localStorage.removeItem(ye)}function vt(t){localStorage.setItem(je,JSON.stringify(t))}function kt(){const t=localStorage.getItem(je);return t?JSON.parse(t):null}function St(){localStorage.removeItem(je)}function Be(){return!!_e()}const Ct="https://c5imdcapp.azurewebsites.net";function Pt(){const[t,a]=l.useState({email:"",password:"",remember:!1}),[s,r]=l.useState({}),i=se(),m=()=>{const u={};return t.email.trim()?/^[\w-.]+@([\w-]+\.)+[\w-]{2,4}$/.test(t.email)||(u.email="Email is invalid"):u.email="Email is required",t.password||(u.password="Password is required"),u},c=u=>{const{name:w,value:n,type:b,checked:g}=u.target;a(f=>({...f,[w]:b==="checkbox"?g:n}))},h=async u=>{u.preventDefault();const w=m();if(r(w),Object.keys(w).length===0)try{const n=await fetch(`${Ct}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t.email,password:t.password})});if(!n.ok){const g=await n.json();throw new Error(g.message||"Login failed")}const b=await n.json();if(b.token)wt(b.token),vt(b.user),v.success("Login successful!",{autoClose:2e3}),setTimeout(()=>{i("/dashboard")},2e3);else throw new Error("Invalid login response")}catch(n){v.error(n.message||"Login failed",{autoClose:3e3})}else v.error("Please fix the errors in the form.",{autoClose:3e3})};return e.jsxs("div",{className:"min-h-screen flex bg-white dark:bg-dark",children:[e.jsx(ae,{}),e.jsxs("div",{className:"hidden lg:flex flex-1 relative bg-white dark:bg-dark items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-auth-mask bg-no-repeat bg-cover opacity-60 dark:opacity-60"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-auth-tree bg-no-repeat bg-bottom bg-contain h-2/3"}),e.jsx("div",{className:"relative z-10 text-center max-w-lg",children:e.jsx("img",{src:jt,alt:"Login illustration",className:"w-full max-w-md mx-auto"})})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:e.jsxs("div",{className:"w-full max-w-[400px] space-y-8 bg-white dark:bg-dark-lighter rounded-lg shadow-md p-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("h4",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-1",children:["Welcome to ",e.jsx("br",{}),"Marketing Data Cloud! ðŸ‘‹"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Please sign in to your account and start the adventure"})]}),e.jsxs("form",{className:"space-y-6",onSubmit:h,noValidate:!0,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-200 mb-2",children:"Email"}),e.jsx("input",{type:"email",name:"email",value:t.email,onChange:c,placeholder:"admin@mdc.com",className:`w-full px-4 py-2 rounded-lg border ${s.email?"border-red-500":"border-gray-300 dark:border-dark-lighter"} bg-white dark:bg-dark text-gray-900 dark:text-gray-200 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-primary focus:border-transparent`}),s.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-200 mb-2",children:"Password"}),e.jsx("input",{type:"password",name:"password",value:t.password,onChange:c,placeholder:"Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·",className:`w-full px-4 py-2 rounded-lg border ${s.password?"border-red-500":"border-gray-300 dark:border-dark-lighter"} bg-white dark:bg-dark text-gray-900 dark:text-gray-200 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-primary focus:border-transparent`}),s.password&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.password})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"remember",checked:t.remember,onChange:c,className:"h-4 w-4 text-primary rounded border-gray-300 dark:border-dark-lighter bg-white dark:bg-dark"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Remember me"})]})}),e.jsx(O,{to:"/forgot-password",className:"text-sm text-primary hover:text-primary/90",children:"Forgot Password?"})]}),e.jsx("button",{type:"submit",className:"w-full bg-primary text-white py-2 px-4 rounded-lg hover:bg-primary/90 transition-colors",children:"Sign in"})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsxs("p",{className:"text-gray-400 dark:text-gray-500",children:["New on our platform?"," ",e.jsx(O,{to:"/signup",className:"text-primary hover:text-primary/90",children:"Create an account"})]})})]})})]})}const Dt=""+new URL("v2-register-dark-DfXzHMvo.png",import.meta.url).href,Et="https://c5imdcapp.azurewebsites.net";function be(){const t=Math.floor(Math.random()*10)+1,a=Math.floor(Math.random()*10)+1;return{question:`What is ${t} + ${a}?`,answer:(t+a).toString()}}const V=["Account Info","Password","Company Info","Verification"];function It(){const[t,a]=l.useState({fullName:"",email:"",password:"",confirmPassword:"",company:"",phone:"",agreement:!1,captcha:""}),[s,r]=l.useState({}),[i,m]=l.useState(be()),[c,h]=l.useState(0),u=se(),w=()=>{const x={};return c===0&&(t.fullName.trim()||(x.fullName="Full Name is required"),t.email.trim()?/^[\w-.]+@([\w-]+\.)+[\w-]{2,4}$/.test(t.email)||(x.email="Email is invalid"):x.email="Email is required"),c===1&&(t.password?t.password.length<6&&(x.password="Password must be at least 6 characters"):x.password="Password is required",t.confirmPassword?t.password!==t.confirmPassword&&(x.confirmPassword="Passwords do not match"):x.confirmPassword="Please confirm your password"),c===2&&(t.company.trim()||(x.company="Company Name is required"),t.phone&&!/^\+?\d{7,15}$/.test(t.phone)&&(x.phone="Phone number is invalid")),c===3&&(t.captcha?t.captcha!==i.answer&&(x.captcha="Captcha answer is incorrect"):x.captcha="Captcha is required",t.agreement||(x.agreement="You must agree to the terms and privacy policy")),x},n=x=>{const{name:y,value:S,type:D,checked:$}=x.target;a(_=>({..._,[y]:D==="checkbox"?$:S}))},b=x=>{x.preventDefault();const y=w();r(y),Object.keys(y).length===0?h(S=>S+1):v.error("Please fix the errors in this step.",{autoClose:2e3})},g=x=>{x.preventDefault(),r({}),h(y=>y-1)},f=async x=>{x.preventDefault();const y=w();if(r(y),Object.keys(y).length===0)try{const S=await fetch(`${Et}/api/users/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullName:t.fullName,email:t.email,password:t.password,company:t.company,phone:t.phone})});if(!S.ok){const D=await S.json();throw new Error(D.message||"Registration failed")}v.success("Registration successful! Redirecting to login...",{autoClose:2e3}),setTimeout(()=>{u("/login")},2e3)}catch(S){v.error(S.message||"Registration failed",{autoClose:3e3}),m(be()),a(D=>({...D,captcha:""}))}else v.error("Please fix the errors in this step.",{autoClose:2e3}),m(be()),a(S=>({...S,captcha:""}))};return e.jsxs("div",{className:"min-h-screen flex bg-white dark:bg-dark",children:[e.jsx(ae,{}),e.jsxs("div",{className:"hidden lg:flex flex-1 relative bg-white dark:bg-dark items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-auth-mask bg-no-repeat bg-cover opacity-60 dark:opacity-60"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-auth-tree bg-no-repeat bg-bottom bg-contain h-2/3"}),e.jsx("div",{className:"relative z-10 text-center max-w-lg",children:e.jsx("img",{src:Dt,alt:"Signup illustration",className:"w-full max-w-md mx-auto"})})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:e.jsxs("div",{className:"max-w-md w-full mx-auto p-8 bg-white dark:bg-dark-lighter rounded-lg shadow-md",children:[e.jsx("h4",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-1",children:"Create your account"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Please fill in the information below to register."}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-gray-400 dark:text-gray-500",children:["Step ",c+1," of ",V.length,": ",V[c]]}),e.jsx("div",{className:"flex justify-center gap-2 mt-2",children:V.map((x,y)=>e.jsx("span",{className:`h-2 w-2 rounded-full transition-colors duration-200
                    ${y===c?"bg-primary":"bg-gray-300 dark:bg-gray-600"}`},x))})]}),e.jsxs("form",{className:"space-y-6",onSubmit:c===V.length-1?f:b,noValidate:!0,children:[c===0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-200 mb-2",children:"Full Name"}),e.jsx("input",{type:"text",name:"fullName",value:t.fullName,onChange:n,placeholder:"Your full name",className:`w-full px-4 py-2 rounded-lg border ${s.fullName?"border-red-500":"border-gray-300 dark:border-dark-lighter"} bg-white dark:bg-dark text-gray-900 dark:text-gray-200 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-primary focus:border-transparent`}),s.fullName&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.fullName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-200 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",name:"email",value:t.email,onChange:n,placeholder:"your@email.com",className:`w-full px-4 py-2 rounded-lg border ${s.email?"border-red-500":"border-gray-300 dark:border-dark-lighter"} bg-white dark:bg-dark text-gray-900 dark:text-gray-200 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-primary focus:border-transparent`}),s.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.email})]})]}),c===1&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-200 mb-2",children:"Password"}),e.jsx("input",{type:"password",name:"password",value:t.password,onChange:n,placeholder:"Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·",className:`w-full px-4 py-2 rounded-lg border ${s.password?"border-red-500":"border-gray-300 dark:border-dark-lighter"} bg-white dark:bg-dark text-gray-900 dark:text-gray-200 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-primary focus:border-transparent`}),s.password&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.password})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-200 mb-2",children:"Confirm Password"}),e.jsx("input",{type:"password",name:"confirmPassword",value:t.confirmPassword,onChange:n,placeholder:"Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·",className:`w-full px-4 py-2 rounded-lg border ${s.confirmPassword?"border-red-500":"border-gray-300 dark:border-dark-lighter"} bg-white dark:bg-dark text-gray-900 dark:text-gray-200 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-primary focus:border-transparent`}),s.confirmPassword&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.confirmPassword})]})]}),c===2&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-200 mb-2",children:"Company Name"}),e.jsx("input",{type:"text",name:"company",value:t.company,onChange:n,placeholder:"Your company",className:`w-full px-4 py-2 rounded-lg border ${s.company?"border-red-500":"border-gray-300 dark:border-dark-lighter"} bg-white dark:bg-dark text-gray-900 dark:text-gray-200 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-primary focus:border-transparent`}),s.company&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.company})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-200 mb-2",children:["Phone Number ",e.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-xs",children:"(optional)"})]}),e.jsx("input",{type:"tel",name:"phone",value:t.phone,onChange:n,placeholder:"+1234567890",className:`w-full px-4 py-2 rounded-lg border ${s.phone?"border-red-500":"border-gray-300 dark:border-dark-lighter"} bg-white dark:bg-dark text-gray-900 dark:text-gray-200 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-primary focus:border-transparent`}),s.phone&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.phone})]})]}),c===3&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-200 mb-2",children:"Captcha"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"bg-gray-100 dark:bg-dark-lighter text-gray-900 dark:text-gray-200 px-3 py-2 rounded",children:i.question}),e.jsx("input",{type:"text",name:"captcha",value:t.captcha,onChange:n,placeholder:"Answer",className:`w-24 px-2 py-2 rounded-lg border ${s.captcha?"border-red-500":"border-gray-300 dark:border-dark-lighter"} bg-white dark:bg-dark text-gray-900 dark:text-gray-200 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-primary focus:border-transparent`})]}),s.captcha&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.captcha})]}),e.jsx("div",{className:"flex items-center mt-4",children:e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"agreement",checked:t.agreement,onChange:n,className:`h-4 w-4 text-primary rounded border-gray-300 dark:border-dark-lighter bg-white dark:bg-dark ${s.agreement?"border-red-500":""}`}),e.jsxs("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:["I agree to the"," ",e.jsx("a",{href:"#",className:"text-primary hover:text-primary/90",children:"Terms and Privacy Policy"})]})]})}),s.agreement&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.agreement})]}),e.jsxs("div",{className:"flex justify-between mt-8",children:[c>0&&e.jsx("button",{type:"button",onClick:g,className:"bg-gray-600 dark:bg-gray-400 text-white py-2 px-4 rounded-lg hover:bg-gray-500 dark:hover:bg-gray-500 transition-colors focus-visible:outline focus-visible:outline-2 focus-visible:outline-primary",children:"Previous"}),e.jsx("div",{className:"flex-1"}),c<V.length-1?e.jsx("button",{type:"submit",className:"bg-primary text-white py-2 px-4 rounded-lg hover:bg-primary/90 transition-colors focus-visible:outline focus-visible:outline-2 focus-visible:outline-primary",children:"Next"}):e.jsx("button",{type:"submit",className:"bg-primary text-white py-2 px-4 rounded-lg hover:bg-primary/90 transition-colors focus-visible:outline focus-visible:outline-2 focus-visible:outline-primary",children:"Sign up"})]})]}),e.jsx("div",{className:"text-center mt-10",children:e.jsxs("p",{className:"text-gray-400",children:["Already have an account?"," ",e.jsx(O,{to:"/",className:"text-primary hover:text-primary/90",children:"Sign in instead"})]})})]})})]})}function Ft(){const[t,a]=l.useState(""),[s,r]=l.useState(""),i=()=>{if(t.trim()){if(!/^[\w-.]+@([\w-]+\.)+[\w-]{2,4}$/.test(t))return"Email is invalid"}else return"Email is required";return""},m=c=>{c.preventDefault();const h=i();r(h),h?v.error(h,{autoClose:3e3}):(v.success("Password reset link sent to your email!",{autoClose:3e3}),a(""))};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-white dark:bg-dark",children:[e.jsx(ae,{}),e.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-dark-lighter rounded-lg shadow-lg p-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4 text-center",children:"Forgot Password"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 text-center",children:"Enter your email address and weâ€™ll send you a link to reset your password."}),e.jsxs("form",{onSubmit:m,noValidate:!0,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-200 mb-2",children:"Email"}),e.jsx("input",{type:"email",name:"email",value:t,onChange:c=>a(c.target.value),placeholder:"your@email.com",className:`w-full px-4 py-2 rounded-lg border ${s?"border-red-500":"border-gray-300 dark:border-dark-lighter"} bg-white dark:bg-dark text-gray-900 dark:text-gray-200 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-primary focus:border-transparent`}),s&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s})]}),e.jsx("button",{type:"submit",className:"w-full bg-primary text-white py-2 px-4 rounded-lg hover:bg-primary/90 transition-colors",children:"Send Reset Link"})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsx(O,{to:"/",className:"text-primary hover:text-primary/90 text-sm",children:"Back to Login"})})]})]})}const Q=({icon:t,iconColor:a,bgColor:s,title:r,value:i})=>e.jsx("div",{className:"dashboard-card bg-white rounded-lg shadow p-6 border border-gray-200 hover:transform hover:-translate-y-1 hover:shadow-lg transition",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-3 rounded-full ${s} mr-4`,children:e.jsx(j,{icon:t,className:`${a} text-xl`})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:r}),e.jsx("p",{className:"text-2xl font-bold",children:i})]})]})}),ee=({icon:t,iconColor:a,bgColor:s,label:r,hoverBgColor:i})=>e.jsxs("button",{className:`w-full flex flex-col items-center justify-center p-4 rounded-lg shadow transition bg-white hover:bg-${i} border border-gray-200`,children:[e.jsx("span",{className:`p-2 rounded-full ${s} mb-2`,children:e.jsx(j,{icon:t,className:`${a} text-lg`})}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:r})]}),$t=({statusIcon:t,statusColor:a,fileName:s,timeAgo:r,size:i})=>e.jsxs("div",{className:"flex items-center px-4 py-3",children:[e.jsx("span",{className:`flex items-center justify-center w-8 h-8 rounded-full ${a} mr-3`,children:e.jsx(j,{icon:t})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-800",children:s}),e.jsxs("div",{className:"text-xs text-gray-500",children:[r," â€¢ ",i]})]})]}),Tt="https://c5imdcapp.azurewebsites.net",Ee="dashboardMetricsCache",Ot=10*60*1e3,Ie=()=>{const[t,a]=l.useState({totalUploads:null,successfulUploads:null,failedUploads:null,dataProcessed:null}),[s,r]=l.useState([]),[i,m]=l.useState(!0),[c,h]=l.useState(null);return l.useEffect(()=>{const u=async()=>{try{const n=await fetch(`${Tt}/api/dashboard/metrics`);if(!n.ok)throw new Error("Failed to fetch dashboard metrics");const b=await n.json(),g={timestamp:Date.now(),metrics:{totalUploads:b.totalUploads,successfulUploads:b.successfulUploads,failedUploads:b.failedUploads,dataProcessed:b.dataProcessed},recentUploads:b.recentUploads||[]};localStorage.setItem(Ee,JSON.stringify(g)),a(g.metrics),r(g.recentUploads),m(!1)}catch(n){h(n.message),m(!1)}},w=localStorage.getItem(Ee);if(w)try{const n=JSON.parse(w);if(Date.now()-n.timestamp<Ot){a(n.metrics),r(n.recentUploads),m(!1);return}}catch{}u()},[]),i?e.jsx("div",{children:"Loading dashboard metrics..."}):c?e.jsxs("div",{children:["Error loading dashboard metrics: ",c]}):e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx(Q,{icon:$e,iconColor:"text-blue-500",bgColor:"bg-blue-100",title:"Total Uploads",value:t.totalUploads??"N/A"}),e.jsx(Q,{icon:Se,iconColor:"text-green-500",bgColor:"bg-green-100",title:"Successful",value:t.successfulUploads??"N/A"}),e.jsx(Q,{icon:Ce,iconColor:"text-red-500",bgColor:"bg-red-100",title:"Failed",value:t.failedUploads??"N/A"}),e.jsx(Q,{icon:tt,iconColor:"text-purple-500",bgColor:"bg-purple-100",title:"Data Processed",value:t.dataProcessed??"N/A"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-200",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[e.jsx(j,{icon:Te,className:"mr-2 text-blue-500"})," Recent Uploads"]})}),e.jsx("div",{className:"divide-y divide-gray-200",children:s.length===0?e.jsx("p",{className:"p-4 text-gray-500",children:"No recent uploads found."}):s.map(u=>e.jsx($t,{statusIcon:u.status==="success"?Se:Ce,statusColor:u.status==="success"?"bg-green-100 text-green-500":"bg-red-100 text-red-500",fileName:u.fileName,timeAgo:u.timeAgo,size:u.size},u.id))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-200",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[e.jsx(j,{icon:st,className:"mr-2 text-yellow-500"})," Quick Actions"]})}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(O,{to:"/upload",children:e.jsx(ee,{icon:Oe,iconColor:"text-blue-500",bgColor:"bg-blue-100",label:"New Upload",hoverBgColor:"blue-50"})}),e.jsx(O,{to:"/destination",children:e.jsx(ee,{icon:at,iconColor:"text-green-500",bgColor:"bg-green-100",label:"New Destination",hoverBgColor:"green-50"})}),e.jsx(O,{to:"/jobs",children:e.jsx(ee,{icon:rt,iconColor:"text-purple-500",bgColor:"bg-purple-100",label:"View Jobs",hoverBgColor:"purple-50"})}),e.jsx(O,{to:"/settings",children:e.jsx(ee,{icon:Ae,iconColor:"text-red-500",bgColor:"bg-red-100",label:"Settings",hoverBgColor:"red-50"})})]})})]})]})]})};function At({data:t=[],title:a="Parsed Data Preview:",subtitle:s}){const r=Array.isArray(t)?t:[],[i,m]=l.useState(1),c=20,h=Math.ceil(r.length/c),u=()=>m(g=>Math.max(g-1,1)),w=()=>m(g=>Math.min(g+1,h)),n=(i-1)*c,b=r.slice(n,n+c);return!r||r.length===0?e.jsx("div",{className:"text-gray-500 text-center py-8",children:"No data to preview."}):e.jsxs("div",{className:"mt-6 bg-white p-4 rounded-md shadow",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:a}),s&&e.jsx("h4",{className:"mb-4 text-gray-500",children:s}),e.jsx("div",{className:"overflow-x-auto w-full border border-gray-300 rounded-md mb-4",style:{maxWidth:"75vw"},children:e.jsxs("table",{className:"min-w-max divide-y divide-gray-200 text-sm",children:[e.jsx("thead",{children:e.jsx("tr",{children:Object.keys(r[0]).map(g=>e.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-600",children:g},g))})}),e.jsx("tbody",{children:b.map((g,f)=>e.jsx("tr",{className:f%2===0?"bg-white":"bg-gray-50",children:Object.values(g).map((x,y)=>e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-gray-700",children:x},y))},n+f))})]})}),e.jsxs("div",{className:"flex justify-between mt-4 items-center",children:[e.jsx("button",{onClick:u,disabled:i===1,className:"px-3 py-1 bg-gray-300 rounded disabled:opacity-50",children:"Previous"}),e.jsxs("span",{children:["Page ",i," of ",h]}),e.jsx("button",{onClick:w,disabled:i===h,className:"px-3 py-1 bg-gray-300 rounded disabled:opacity-50",children:"Next"})]})]})}const te=["upload","viewData","summary","uploadAzure","executeNotebook","outputData"],Ut=({number:t,label:a,status:s})=>{const r="progress-step flex-1 relative flex flex-col items-center",i=s==="completed"||s==="active"?"bg-blue-500":"bg-gray-300",m=`step-number flex items-center justify-center w-8 h-8 rounded-full border-2 mb-1 z-[999] ${s==="completed"?"bg-blue-500 border-blue-500 text-white":s==="active"?"bg-blue-500 border-blue-500 text-white z-[999]":"bg-white border-gray-300 text-gray-500"}`;return e.jsxs("div",{className:r,children:[e.jsx("div",{className:m,children:t}),e.jsx("span",{className:`text-sm font-medium ${s==="active"?"text-blue-500":"text-gray-500"}`,children:a}),t!==te.length&&e.jsx(e.Fragment,{children:e.jsx("div",{className:`absolute top-4 left-1/2 w-full h-0.5 -translate-x-1 z-0 ${i}`,style:{height:"2px"}})})]})},Y=({title:t,value:a,singleLine:s})=>e.jsxs("div",{className:`bg-gray-50 p-4 rounded-md shadow-sm flex ${s?"flex-row space-x-2":"flex-col"} items-center justify-center w-50`,children:[e.jsxs("span",{className:"text-sm text-gray-500",children:[t,":"]}),e.jsx("span",{className:"text-lg font-semibold text-gray-800 mt-1",children:a})]}),Lt=()=>{const t=Ue(),[a,s]=l.useState(0),[r,i]=l.useState(null),[m,c]=l.useState(!1),[h,u]=l.useState(null),[w,n]=l.useState([]),[b,g]=l.useState(""),[f,x]=l.useState([]),[y,S]=l.useState(""),[D,$]=l.useState(""),[_,G]=l.useState(""),[B,re]=l.useState(1),U=20,[oe,J]=l.useState(!1),[Je,q]=l.useState(!1),[le,ne]=l.useState(0),[ie,L]=l.useState(0),[de,z]=l.useState(!1),[A,ce]=l.useState(null),[qe,me]=l.useState(!1),[we,xe]=l.useState([]),[N,X]=l.useState(()=>{const o=localStorage.getItem("uploadTaskData");return o?JSON.parse(o):{taskId:pe()}}),[ue,Ne]=l.useState({});l.useEffect(()=>{const o=localStorage.getItem("mdc_auth_user");if(o)try{Ne(JSON.parse(o))}catch(d){console.error("Failed to parse loggedInUser from localStorage",d),Ne({})}},[]),l.useEffect(()=>{localStorage.setItem("uploadTaskData",JSON.stringify(N))},[N]),l.useEffect(()=>{a===2&&r&&f.length&&T({fileSize:r?r.size>1024*1024?(r.size/(1024*1024)).toFixed(2)+" MB":(r.size/1024).toFixed(2)+" KB":"N/A",total_rows:f.length})},[a,r,f]),l.useEffect(()=>{if(t.state&&t.state.resumeTask){const o=t.state.resumeTask;X(o),o.selectedOption&&S(o.selectedOption),o.selectedDataId&&$(o.selectedDataId),o.fileName,o.uploadCompleted!==void 0&&q(o.uploadCompleted),o.currentStep!==void 0&&s(o.currentStep),window.history.replaceState({},document.title)}else N&&(N.selectedOption&&S(N.selectedOption),N.selectedDataId&&$(N.selectedDataId),N.fileName,N.uploadCompleted!==void 0&&q(N.uploadCompleted),N.currentStep!==void 0&&s(N.currentStep))},[]);const T=o=>{X(d=>({...d,...o}))},K=()=>{if(a<te.length-1){const o=a+1;s(o),T({currentStep:o})}},W=()=>{if(a>0){const o=a-1;s(o),T({currentStep:o})}},Ke=o=>{if(o.target.files.length>0){const d=o.target.files[0];i(d),T({fileName:d.name}),ve(d)}},We=o=>{if(o.preventDefault(),c(!1),o.dataTransfer.files.length>0){const d=o.dataTransfer.files[0];i(d),T({fileName:d.name}),ve(d)}},He=o=>{o.preventDefault(),c(!0)},Ve=o=>{o.preventDefault(),c(!1)},Ye=o=>{const d=o.target.value;if(g(d),h){const p=h.Sheets[d],k=M.sheet_to_json(p,{defval:""});x(k)}},ve=o=>{const d=new FileReader;d.onload=p=>{const k=new Uint8Array(p.target.result),C=De(k,{type:"array"});u(C),n(C.SheetNames),g(C.SheetNames[0]);const F=C.Sheets[C.SheetNames[0]],E=M.sheet_to_json(F,{defval:""});x(E)},d.readAsArrayBuffer(o)},Ge=async()=>{if(!["Google","Meta","Neilsen","Amazon","Walmart","Circana","LinkedIn","Tiktok","Snapchat","Youtube","Twitter"].includes(D)){v.error(`Notebook for source "${D}" not found.`);return}z(!0),L(0);try{const d="https://c5imdcapp.azurewebsites.net",p=await fetch(`${d}/api/databricks/run-notebook`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileName:r?r.name:N.fileName,source:D})}),k=await p.json();if(p.ok&&k.run_id){const C=setInterval(async()=>{try{const F=await fetch(`${d}/api/databricks/run-status/${k.run_id}`),E=await F.json();if(F.ok)if(E.status==="completed"){clearInterval(C),L(100),z(!1);const P=a+1;s(P),T({currentStep:P}),v.success("Notebook run completed successfully!")}else E.status==="failed"?(clearInterval(C),L(0),z(!1),v.error("Notebook run failed.")):typeof E.progress=="number"&&L(E.progress);else console.error("Failed to get run status:",E)}catch(F){console.error("Error polling run status:",F)}},3e3);ce(C)}else console.error("Notebook execution failed:",k),v.error("Notebook execution failed."),z(!1)}catch(d){console.error("Error executing notebook:",d),v.error("An error occurred while executing the notebook."),z(!1)}};l.useEffect(()=>()=>{A&&clearInterval(A)},[A]),l.useEffect(()=>{a!==4&&(L(0),A&&(clearInterval(A),ce(null)))},[a]),l.useEffect(()=>{(async()=>{if(a===5){me(!0),xe([]),i(null);try{const d="daalabsadls001",p="mdcproject",k="?sv=2024-11-04&ss=bfqt&srt=sco&sp=rwdlacupyx&se=2025-06-30T14:24:00Z&st=2025-05-05T06:24:00Z&spr=https,http&sig=K3Xnawpkic7Gl66pk7Sy0KVo1DbBCNaSIfpciq4XJ5o%3D",F=`https://${d}.blob.core.windows.net/${p}/output/MMM_Data_Cube/MMM_Data_Cube.csv${k}`,E=await fetch(F);if(!E.ok)throw new Error(`Failed to fetch processed data: ${E.statusText}`);const P=await E.text(),R=De(P,{type:"string"}),he=R.SheetNames[0],Qe=R.Sheets[he],et=M.sheet_to_json(Qe);xe(et)}catch(d){console.error("Error fetching processed data:",d),v.error("Failed to load processed data.")}finally{me(!1)}}})()},[a]);const Xe=async o=>{J(!0),q(!1),ne(0);try{const d="mdcproject",p="raw/",k="?sv=2024-11-04&ss=bfqt&srt=sco&sp=rwdlacupyx&se=2025-06-30T14:24:00Z&st=2025-05-05T06:24:00Z&spr=https,http&sig=K3Xnawpkic7Gl66pk7Sy0KVo1DbBCNaSIfpciq4XJ5o%3D",C="daalabsadls001",F=`${p}/${y}/${o.name}`,E=`https://${C}.blob.core.windows.net/${d}/${F}${k}`,P=new XMLHttpRequest;P.open("PUT",E,!0),P.setRequestHeader("x-ms-blob-type","BlockBlob"),P.setRequestHeader("Content-Type",o.type||"application/octet-stream"),P.upload.onprogress=R=>{if(R.lengthComputable){const he=Math.round(R.loaded/R.total*100);ne(he)}},P.onload=()=>{P.status>=200&&P.status<300?(q(!0),T({uploadCompleted:!0}),K()):alert(`Upload failed: ${P.statusText}`),J(!1)},P.onerror=()=>{alert("Network error during upload"),J(!1)},P.send(o)}catch(d){console.error("Upload to Azure failed:",d),alert(d.message||"Upload failed"),J(!1)}},ke=()=>{const o=M.json_to_sheet(we),d=M.book_new();M.book_append_sheet(d,o,"ProcessedData"),lt(d,"final_output_processed_data.xlsx")},Ze=()=>{if(!y){G("Please select a data source.");return}G(""),T({selectedOption:y,selectedDataId:D,currentStep:a+1}),K()};return l.useEffect(()=>{(async()=>{if(a===te.length-1&&Object.keys(ue).length>0)try{const d="https://c5imdcapp.azurewebsites.net",p={taskId:N.taskId,fileName:N.fileName,filesize:N.fileSize,total_rows:N.total_rows,selectedOption:N.selectedOption,selectedDataId:N.selectedDataId,currentStep:a,uploadCompleted:N.uploadCompleted||!1,...ue};if(console.log("Register notebook payload:",p),!(await fetch(`${d}/api/databricks/register-notebook`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)})).ok)throw new Error("Failed to register notebook");v.success("Notebook registered successfully."),localStorage.removeItem("uploadTaskData"),X({taskId:pe()})}catch(d){console.error("Error registering notebook:",d),v.error("Failed to register notebook.")}})()},[a,ue]),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-200",children:[e.jsx(ae,{}),e.jsxs("div",{className:"p-6 border-b border-gray-200 relative",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Process Excel File"}),a>=4&&e.jsx("button",{className:"absolute top-4 right-4 px-4 py-2 bg-yellow-400 text-black rounded-md hover:bg-yellow-500 transition",onClick:async()=>{try{const o="https://c5imdcapp.azurewebsites.net",d=localStorage.getItem("uploadTaskData");if(!d){v.error("No task data found to pause.");return}const p=JSON.parse(d),k=JSON.parse(localStorage.getItem("mdc_auth_user")||"{}"),C={taskId:p.taskId,fileName:p.fileName,filesize:p.fileSize,total_rows:p.total_rows,selectedOption:p.selectedOption,selectedDataId:p.selectedDataId,currentStep:p.currentStep,uploadCompleted:!1,...k,status:0};if(!(await fetch(`${o}/api/databricks/register-notebook`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)})).ok)throw new Error("Failed to pause and save task.");v.success("Task paused and saved successfully."),localStorage.removeItem("uploadTaskData"),X({taskId:pe()}),i(null),c(!1),u(null),n([]),g(""),x([]),S(""),$(""),G(""),re(1),J(!1),q(!1),ne(0),L(0),z(!1),A&&(clearInterval(A),ce(null)),me(!1),xe([]),s(0)}catch(o){console.error("Error pausing task:",o),v.error("Failed to pause and save task.")}},title:"Pause and save task",children:"Pause"}),e.jsx("div",{className:"mb-8 flex justify-between relative",children:te.map((o,d)=>{let p="pending";return d<a?p="completed":d===a&&(p="active"),e.jsx(Ut,{number:d+1,label:o.charAt(0).toUpperCase()+o.slice(1),status:p},o)})})]}),e.jsxs("div",{className:"p-6",children:[a===0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-end mb-6",children:e.jsxs("button",{id:"next-from-upload",className:`px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition ${!r||!y?"opacity-50 cursor-not-allowed":""}`,disabled:!r||!y,onClick:Ze,children:["Next ",e.jsx(j,{icon:Z,className:"ml-2"})]})}),e.jsxs("div",{className:"mb-6 flex flex-col w-full",children:[e.jsx("label",{htmlFor:"selectOption",className:"select-label mb-2 font-medium text-gray-700",children:"Choose your data source:"}),e.jsxs("select",{id:"selectOption",value:y,onChange:o=>{const d=o.target.selectedIndex,p=o.target.options[d].getAttribute("data-id");S(o.target.value),$(p),G("")},style:{width:"100%"},className:`select-input border border-gray-300 rounded-md px-3 py-2 w-full block ${_?"border-red-500":""}`,children:[e.jsx("option",{value:"",disabled:!0,children:"-- Select --"}),e.jsx("option",{value:"google_ads","data-id":"Google",children:"Google Ads"}),e.jsx("option",{value:"meta","data-id":"Meta",children:"Meta"}),e.jsx("option",{value:"neilsen","data-id":"Neilsen",children:"Neilsen"}),e.jsx("option",{value:"Amazon","data-id":"Amazon",children:"Amazon"}),e.jsx("option",{value:"Walmart","data-id":"Walmart",children:"Walmart"}),e.jsx("option",{value:"Circana","data-id":"Circana",children:"Circana"}),e.jsx("option",{value:"LinkedIn","data-id":"LinkedIn",children:"LinkedIn"}),e.jsx("option",{value:"Tiktok","data-id":"Tiktok",children:"Tiktok"}),e.jsx("option",{value:"Snapchat","data-id":"Snapchat",children:"Snapchat"}),e.jsx("option",{value:"Youtube","data-id":"Youtube",children:"Youtube"}),e.jsx("option",{value:"Twitter","data-id":"Twitter",children:"Twitter"})]}),_&&e.jsx("span",{className:"text-red-500 text-sm mt-1",children:_})]}),e.jsxs("div",{id:"drop-area",className:`file-upload rounded-lg p-8 text-center mb-6 border-2 border-dashed ${m?"border-blue-500 bg-blue-50":"border-gray-300"}`,onDrop:We,onDragOver:He,onDragLeave:Ve,children:[e.jsx(j,{icon:$e,className:"text-4xl text-blue-500 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Drag & Drop your Excel file here"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"or"}),e.jsx("input",{type:"file",id:"file-input",accept:".xlsx,.xls,.csv",className:"hidden",onChange:Ke},r?r.name:"file-input"),e.jsx("label",{htmlFor:"file-input",className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition cursor-pointer",children:"Browse Files"}),r&&e.jsxs("div",{id:"file-info",className:"mt-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Selected file: ",e.jsx("span",{className:"font-medium",children:r.name})]}),e.jsx("p",{className:"text-xs text-gray-500",children:r.size>1024*1024?(r.size/(1024*1024)).toFixed(2)+" MB":(r.size/1024).toFixed(2)+" KB"})]})]})]}),a===1&&e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between mb-6",children:[e.jsxs("button",{className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition",onClick:W,children:[e.jsx(j,{icon:H,className:"mr-2"})," Back"]}),e.jsxs("button",{className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition",onClick:K,children:["Next ",e.jsx(j,{icon:Z,className:"ml-2"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"sheet-select",className:"block mb-2 font-medium text-gray-700",children:"Select Sheet:"}),e.jsx("select",{id:"sheet-select",value:b,onChange:Ye,className:"border border-gray-300 rounded-md px-3 py-2 w-full",children:w.map(o=>e.jsx("option",{value:o,children:o},o))})]}),e.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Parsed Data Preview"}),e.jsx("div",{className:"overflow-x-auto w-full border border-gray-300 rounded-md mb-4",style:{maxWidth:"77vw"},children:e.jsxs("table",{className:"min-w-max divide-y divide-gray-200 text-sm",children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0",children:e.jsx("tr",{children:f.length>0&&Object.keys(f[0]).map(o=>e.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-700 break-words truncate",style:{minWidth:120,maxWidth:200,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:o,children:o},o))})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:f.slice((B-1)*U,B*U).map((o,d)=>e.jsx("tr",{className:d%2===0?"bg-white":"bg-gray-50",children:Object.values(o).map((p,k)=>e.jsx("td",{className:"px-4 py-2 whitespace-nowrap break-words truncate",style:{minWidth:120,maxWidth:200,overflow:"hidden",textOverflow:"ellipsis"},title:p,children:p},k))},d))})]})}),f.length>U&&e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsx("button",{className:"px-3 py-1 bg-gray-200 rounded disabled:opacity-50",onClick:()=>re(o=>Math.max(1,o-1)),disabled:B===1,children:"Previous"}),e.jsxs("span",{children:["Page ",B," of ",Math.ceil(f.length/U)]}),e.jsx("button",{className:"px-3 py-1 bg-gray-200 rounded disabled:opacity-50",onClick:()=>re(o=>Math.min(Math.ceil(f.length/U),o+1)),disabled:B===Math.ceil(f.length/U),children:"Next"})]})]}),a===2&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-6",children:[e.jsxs("button",{className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition",onClick:W,children:[e.jsx(j,{icon:H,className:"mr-2"})," Back"]}),e.jsxs("button",{className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition",onClick:K,children:["Next ",e.jsx(j,{icon:Z,className:"ml-2"})]})]}),e.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-6",children:"Uploaded File Summary"}),e.jsx("div",{className:"mb-6",children:e.jsx(Y,{title:"File Name",value:r?r.name:"N/A",singleLine:!1})}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsx(Y,{title:"File Size",value:r?r.size>1024*1024?(r.size/(1024*1024)).toFixed(2)+" MB":(r.size/1024).toFixed(2)+" KB":"N/A"}),e.jsx(Y,{title:"Number of Rows",value:f.length}),e.jsx(Y,{title:"Number of Columns",value:f.length>0?Object.keys(f[0]).length:0}),e.jsx(Y,{title:"Selected Sheet",value:b})]})]}),a===3&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-6",children:[e.jsxs("button",{className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition",onClick:W,children:[e.jsx(j,{icon:H,className:"mr-2"})," Back"]}),Je?e.jsxs("button",{className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition",onClick:K,children:["Next ",e.jsx(j,{icon:Z,className:"ml-2"})]}):e.jsxs("button",{className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition",onClick:()=>Xe(r),disabled:oe||!r,children:[oe?`Uploading... ${le}%`:"Upload to Azure",oe&&e.jsx(j,{icon:ot,spin:!0,className:"ml-2"})]})]}),e.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Uploading to Azure Blob Storage"}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-6 mb-4 overflow-hidden",children:e.jsx("div",{className:"bg-blue-600 h-6 rounded-full transition-all duration-300",style:{width:`${le}%`,minWidth:"2rem"}})}),e.jsxs("p",{className:"text-right text-sm font-medium text-blue-600",children:[le,"% uploaded"]})]}),a===4&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-6",children:[e.jsxs("button",{className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition",onClick:W,children:[e.jsx(j,{icon:H,className:"mr-2"})," Back"]}),e.jsx("button",{className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition",onClick:Ge,disabled:de,style:{position:"relative"},children:de?`Executing... ${ie}%`:"Execute"})]}),de&&e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-6 mb-4 overflow-hidden",children:e.jsx("div",{className:"bg-blue-600 h-6 rounded-full transition-all duration-300",style:{width:`${ie}%`,minWidth:"2rem"}})}),e.jsxs("p",{className:"text-right text-sm font-medium text-blue-600",children:[ie,"% completed"]})]}),e.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Executing Notebook"})]}),a===5&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-4 mb-6",children:[e.jsxs("button",{className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition",onClick:W,children:[e.jsx(j,{icon:H,className:"mr-2"})," Back"]}),e.jsxs("button",{className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition",onClick:ke,children:[e.jsx(j,{icon:Pe,className:"mr-2"}),"Download Output"]}),e.jsx("button",{className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition",onClick:()=>alert("View output clicked"),children:"View Output"})]}),e.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Output Data"}),qe?e.jsx("div",{className:"spinner-wrapper",style:{display:"flex",justifyContent:"center",marginTop:"2rem"},children:e.jsx("div",{className:"spinner-border",role:"status",style:{width:"3rem",height:"3rem",border:"0.4em solid #f3f3f3",borderTop:"0.4em solid #2563eb",borderRadius:"50%",animation:"spin 1s linear infinite"}})}):e.jsxs(e.Fragment,{children:[e.jsx(At,{data:we,title:"Processed Data Preview:",subtitle:"Below is the Processed data ready for review and interpretation."}),e.jsx("div",{className:"text-center mt-8 download_btn",children:e.jsxs("button",{onClick:ke,className:"download-button px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition",children:[e.jsx(j,{icon:Pe,style:{marginRight:"0.5rem"}}),"Download Processed Data"]})})]})]})]})]})},zt=()=>{const t=l.useRef(null),a=l.useRef(null),s=l.useRef(null);return l.useEffect(()=>{const r=t.current.getContext("2d"),i=a.current.getContext("2d"),m=s.current.getContext("2d"),c=new ge(r,{type:"bar",data:{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"Uploads",data:[30,45,120,40,70,90,20,80,100,50,90,30],backgroundColor:"#3b82f6"}]},options:{responsive:!0,maintainAspectRatio:!1}}),h=new ge(i,{type:"doughnut",data:{labels:["Success","Failed"],datasets:[{data:[80,20],backgroundColor:["#22c55e","#ef4444"]}]},options:{responsive:!0,maintainAspectRatio:!1}}),u=new ge(m,{type:"bar",data:{labels:["Google","Meta","Neilsen","Amazon","Microsoft","Linkedin","Twitter","Youtube","Snapchat"," Tiktok","Reddit","Pinterest"],datasets:[{label:"Data Volume",data:[120,80,30,150,220,60,40,70,650,90,100,110],backgroundColor:"#3b82f6"}]},options:{responsive:!0,maintainAspectRatio:!1}});return()=>{c.destroy(),h.destroy(),u.destroy()}},[]),e.jsxs("div",{className:"section",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-200",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Uploads by Month"})}),e.jsx("div",{className:"p-4",style:{height:300},children:e.jsx("canvas",{ref:t})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-200",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Success vs Failed"})}),e.jsx("div",{className:"p-4",style:{height:300},children:e.jsx("canvas",{ref:a})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-200",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Data Volume by Resource"})}),e.jsx("div",{className:"p-4",style:{height:350},children:e.jsx("canvas",{ref:s})})]})]})},Fe="historyNotebooksCache",Rt=10*60*1e3,Mt=()=>{const[t,a]=l.useState([]),[s,r]=l.useState(!1),[i,m]=l.useState(null),[c,h]=l.useState({}),u=se();l.useEffect(()=>{const n=localStorage.getItem("mdc_auth_user");if(n)try{h(JSON.parse(n))}catch(b){console.error("Failed to parse loggedInUser from localStorage",b),h({})}},[]),l.useEffect(()=>{const n=async()=>{if(c.id){r(!0),m(null);try{const f=await fetch(`https://c5imdcapp.azurewebsites.net/api/databricks/user-notebooks/${c.id}`);if(!f.ok)throw new Error("Failed to fetch notebooks");const x=await f.json(),y={timestamp:Date.now(),notebooks:x.notebooks||[]};localStorage.setItem(Fe,JSON.stringify(y)),a(y.notebooks)}catch(g){console.error("Error fetching notebooks:",g),m("Failed to load notebooks")}finally{r(!1)}}};if(!c.id)return;const b=localStorage.getItem(Fe);if(b)try{const g=JSON.parse(b);if(Date.now()-g.timestamp<Rt){a(g.notebooks),r(!1);return}}catch{}n()},[c]);const w=n=>{u("/upload",{state:{resumeTask:n}})};return e.jsx("div",{className:"section",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden mb-8 border border-gray-200",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Upload History"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"relative max-w-xs mb-4 sm:mb-0",children:[e.jsx("label",{htmlFor:"hs-table-search",className:"sr-only",children:"Search"}),e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx(j,{icon:Le,className:"text-gray-400"})}),e.jsx("input",{type:"text",name:"hs-table-search",id:"hs-table-search",className:"py-2 pl-10 pr-4 block w-full border border-gray-200 rounded-md text-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Search..."})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("select",{className:"py-2 px-3 pr-9 block border border-gray-200 rounded-md text-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{children:"All Status"}),e.jsx("option",{children:"Success"}),e.jsx("option",{children:"Failed"})]}),e.jsxs("select",{className:"py-2 px-3 pr-9 block border border-gray-200 rounded-md text-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{children:"Last 30 days"}),e.jsx("option",{children:"Last week"}),e.jsx("option",{children:"Last 24 hours"})]})]})]})]}),e.jsxs("div",{className:"p-0",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"File Name"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data Source"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rows"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 whitespace-nowrap text-center text-gray-500",children:"Loading..."})}):i?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 whitespace-nowrap text-center text-red-500",children:i})}):t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 whitespace-nowrap text-center text-gray-500",children:"No records found."})}):t.map(n=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"fas fa-file-excel text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:n.fileName}),e.jsx("div",{className:"text-sm text-gray-500",children:n.filesize})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:n.selectedOption}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${n.status===1?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:n.status===1?"Success":"Failed"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(n.createdAt).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:n.total_rows||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.status===1?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-900 mr-3",children:"View"}),e.jsx("button",{className:"text-gray-600 hover:text-gray-900 mr-3",children:"Download"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"text-green-600 hover:text-green-900 flex items-center mr-3",onClick:()=>w(n),title:"Resume",children:[e.jsx(j,{icon:nt,className:"mr-1"}),"Resume"]}),e.jsx("button",{className:"text-red-600 hover:text-red-900",onClick:async()=>{if(window.confirm("Are you sure you want to delete this task?"))try{if(!(await fetch(`https://c5imdcapp.azurewebsites.net/api/databricks/notebook/${n.id}`,{method:"DELETE"})).ok)throw new Error("Failed to delete notebook");a(f=>f.filter(x=>x.id!==n.id)),alert("Task deleted successfully")}catch(b){console.error("Error deleting notebook:",b),alert("Failed to delete task")}},title:"Delete",children:"Delete"})]})})]},n.id))})]})}),e.jsxs("div",{className:"bg-gray-50 px-6 py-3 flex items-center justify-between border-t border-gray-200",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Previous"}),e.jsx("button",{className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:"1"})," to ",e.jsx("span",{className:"font-medium",children:t.length})," of ",e.jsx("span",{className:"font-medium",children:t.length})," results"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[e.jsxs("button",{className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:[e.jsx("span",{className:"sr-only",children:"Previous"}),e.jsx("i",{className:"fas fa-chevron-left"})]}),e.jsx("button",{"aria-current":"page",className:"z-10 bg-blue-50 border-blue-500 text-blue-600 relative inline-flex items-center px-4 py-2 border text-sm font-medium",children:"1"}),e.jsx("button",{className:"bg-white border-gray-300 text-gray-500 hover:bg-gray-50 relative inline-flex items-center px-4 py-2 border text-sm font-medium",children:"2"}),e.jsx("button",{className:"bg-white border-gray-300 text-gray-500 hover:bg-gray-50 relative inline-flex items-center px-4 py-2 border text-sm font-medium",children:"3"}),e.jsxs("button",{className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:[e.jsx("span",{className:"sr-only",children:"Next"}),e.jsx("i",{className:"fas fa-chevron-right"})]})]})})]})]})]})]})})},_t=()=>{const[t,a]=l.useState(""),[s,r]=l.useState(""),[i,m]=l.useState(""),[c,h]=l.useState(""),[u,w]=l.useState(""),[n,b]=l.useState(!1),g=()=>!t||!s||!i?(h("All fields are required."),!1):s!==i?(h("New password and confirm password do not match."),!1):s.length<8?(h("New password must be at least 8 characters long."),!1):(h(""),!0),f=async x=>{if(x.preventDefault(),!!g()){b(!0),h(""),w("");try{const y="https://c5imdcapp.azurewebsites.net",S=_e(),D=await fetch(`${y}/api/users/change-password`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${S}`},body:JSON.stringify({currentPassword:t,newPassword:s})});if(!D.ok){const $=await D.json();throw new Error($.message||"Failed to change password")}w("Password changed successfully."),a(""),r(""),m("")}catch(y){h(y.message)}finally{b(!1)}}};return e.jsx("div",{className:"section",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden mb-8 border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Settings"})}),e.jsxs("form",{onSubmit:f,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Change Password"}),e.jsx("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:"Update your account password here."})]}),e.jsxs("div",{className:"space-y-6 sm:space-y-5",children:[e.jsxs("div",{className:"sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start",children:[e.jsx("label",{htmlFor:"current-password",className:"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2",children:"Current Password"}),e.jsx("div",{className:"mt-1 sm:mt-0 sm:col-span-2",children:e.jsx("input",{type:"password",name:"current-password",id:"current-password",autoComplete:"current-password",value:t,onChange:x=>a(x.target.value),className:"max-w-lg block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm border-gray-300 rounded-md",required:!0})})]}),e.jsxs("div",{className:"sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start",children:[e.jsx("label",{htmlFor:"new-password",className:"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2",children:"New Password"}),e.jsx("div",{className:"mt-1 sm:mt-0 sm:col-span-2",children:e.jsx("input",{type:"password",name:"new-password",id:"new-password",autoComplete:"new-password",value:s,onChange:x=>r(x.target.value),className:"max-w-lg block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm border-gray-300 rounded-md",required:!0})})]}),e.jsxs("div",{className:"sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start",children:[e.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2",children:"Confirm New Password"}),e.jsx("div",{className:"mt-1 sm:mt-0 sm:col-span-2",children:e.jsx("input",{type:"password",name:"confirm-password",id:"confirm-password",autoComplete:"new-password",value:i,onChange:x=>m(x.target.value),className:"max-w-lg block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm border-gray-300 rounded-md",required:!0})})]})]}),c&&e.jsx("p",{className:"text-red-600 text-sm",children:c}),u&&e.jsx("p",{className:"text-green-600 text-sm",children:u}),e.jsx("div",{className:"pt-5",children:e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"reset",onClick:()=>{a(""),r(""),m(""),h(""),w("")},className:"bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:n,className:"ml-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:n?"Saving...":"Save"})]})})]})]})})},Bt=""+new URL("logo-pqZhCCf8.png",import.meta.url).href,Jt=[{to:"/",icon:it,label:"Dashboard",end:!0},{to:"/upload",icon:Oe,label:"New Upload"},{to:"/history",icon:Te,label:"Upload History"},{to:"/analytics",icon:dt,label:"Analytics"},{to:"/settings",icon:Ae,label:"Settings"}],qt=()=>{const[t,a]=l.useState(!1),s=se(),r=()=>{a(!t)},i=()=>{Nt(),St(),s("/login")},m=kt();return e.jsxs("div",{className:"sidebar w-64 bg-white border-r border-gray-200 flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-start",children:[e.jsx("img",{src:Bt,alt:"Dashboard Logo",className:"h-8 w-auto"}),e.jsx("span",{className:"ml-2 font-bold text-sm whitespace-nowrap",style:{color:"rgb(92, 189, 250)"},children:"Marketing Data Cloud"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e.jsx("div",{className:"p-2",children:Jt.map(({to:c,icon:h,label:u,end:w})=>e.jsxs(ct,{to:c,end:w,className:({isActive:n})=>`flex items-center p-2 rounded transition-colors ${n?"bg-blue-100 text-blue-700 font-semibold":"hover:bg-blue-50 text-gray-700"}`,children:[e.jsx(j,{icon:h,className:"mr-3"}),u]},c))}),e.jsxs("div",{className:"p-4 border-t border-gray-200 mt-auto",children:[e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:r,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center mr-3",children:e.jsx(j,{icon:mt,className:"text-blue-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:(m==null?void 0:m.username)||"User"}),e.jsx("p",{className:"text-xs text-gray-500",children:(m==null?void 0:m.email)||""})]})]}),e.jsx("div",{className:`transition-transform duration-300 ${t?"rotate-180":"rotate-0"}`,children:e.jsx(j,{icon:xt,className:"text-gray-500"})})]}),e.jsx("div",{className:`overflow-hidden rounded-md bg-gray-100 transition-all duration-700 ease-in-out ${t?"max-h-20 mt-2":"max-h-0"}`,children:e.jsxs("button",{onClick:i,className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-100 rounded-md flex items-center",children:[e.jsx(j,{icon:ut,className:"mr-2"}),"Logout"]})})]})]})]})},Kt=()=>e.jsxs("div",{className:"bg-white border-b border-gray-200 p-4 flex justify-between items-center",children:[e.jsx("div",{className:"flex items-center space-x-4 flex-1",children:e.jsxs("div",{className:"relative w-full max-w-xs",children:[e.jsx(j,{icon:Le,className:"absolute left-3 top-2.5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search...",className:"pl-10 pr-3 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 w-full"})]})}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(j,{icon:ht,className:"text-gray-500 cursor-pointer"}),e.jsx("span",{className:"absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full"})]})})]}),Wt=({open:t,onClose:a,darkMode:s,setDarkMode:r})=>e.jsxs("div",{className:`fixed top-0 right-0 h-full w-72 bg-white shadow-lg z-50 transform transition-transform duration-300 ${t?"translate-x-0":"translate-x-full"}`,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("span",{className:"font-semibold text-lg",children:"Settings"}),e.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-700",children:e.jsx(pt,{size:24})})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Dark Mode"}),e.jsx("button",{onClick:()=>r(i=>!i),className:"p-2 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors","aria-label":"Toggle dark mode",type:"button",children:s?e.jsx(ze,{className:"text-yellow-400 w-6 h-6"}):e.jsx(Re,{className:"text-gray-400 w-6 h-6"})})]})})]}),Ht=({darkMode:t,setDarkMode:a})=>{const[s,r]=l.useState(!1);return e.jsxs("div",{className:"flex h-screen",children:[e.jsx(qt,{}),e.jsxs("div",{className:"flex-1 flex flex-col relative",children:[e.jsx(Kt,{}),e.jsx("button",{className:"fixed bottom-6 right-6 z-40 p-2 rounded-full bg-white border shadow hover:bg-gray-100",onClick:()=>r(!0),"aria-label":"Open settings",type:"button",children:e.jsx(gt,{className:"w-6 h-6 text-gray-700"})}),e.jsx(Wt,{open:s,onClose:()=>r(!1),darkMode:t,setDarkMode:a}),e.jsx("main",{className:"flex-1 overflow-y-auto p-6 bg-gray-50",children:e.jsx(fe,{})})]})]})},Vt=()=>Be()?e.jsx(fe,{}):e.jsx(Me,{to:"/login",replace:!0}),Yt=()=>Be()?e.jsx(Me,{to:"/dashboard",replace:!0}):e.jsx(fe,{});function Gt(){const[t,a]=l.useState(()=>{const r=sessionStorage.getItem("darkMode");return r!==null?r==="true":!0});l.useEffect(()=>{t?document.body.classList.add("dark"):document.body.classList.remove("dark"),sessionStorage.setItem("darkMode",t)},[t]);const s=()=>{const r=Ue();return["/login","/signup","/forgot-password"].includes(r.pathname)?e.jsx("div",{className:"fixed top-4 right-6 z-50",children:e.jsx("button",{onClick:()=>a(m=>!m),className:"p-2 rounded-full bg-dark-lighter hover:bg-dark focus:outline-none transition-colors","aria-label":"Toggle dark mode",type:"button",children:t?e.jsx(ze,{className:"text-yellow-400 w-6 h-6"}):e.jsx(Re,{className:"text-gray-400 w-6 h-6"})})}):null};return e.jsxs(bt,{children:[e.jsx(s,{}),e.jsxs(ft,{children:[e.jsxs(I,{element:e.jsx(Yt,{}),children:[e.jsx(I,{path:"/login",element:e.jsx(Pt,{})}),e.jsx(I,{path:"/signup",element:e.jsx(It,{})}),e.jsx(I,{path:"/forgot-password",element:e.jsx(Ft,{})})]}),e.jsx(I,{element:e.jsx(Vt,{}),children:e.jsxs(I,{path:"/",element:e.jsx(Ht,{darkMode:t,setDarkMode:a}),children:[e.jsx(I,{index:!0,element:e.jsx(Ie,{})}),e.jsx(I,{path:"dashboard",element:e.jsx(Ie,{})}),e.jsx(I,{path:"upload",element:e.jsx(Lt,{})}),e.jsx(I,{path:"analytics",element:e.jsx(zt,{})}),e.jsx(I,{path:"history",element:e.jsx(Mt,{})}),e.jsx(I,{path:"settings",element:e.jsx(_t,{})})]})})]})]})}yt.createRoot(document.getElementById("root")).render(e.jsx(l.StrictMode,{children:e.jsx(Gt,{})}));
